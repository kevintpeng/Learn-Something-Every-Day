<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta name="generator" content="pandoc">
  
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="/style.css" type="text/css">
          <title>Routing</title>
</head>
<body>

<h1 id="routing">Routing</h1>          <a href="index.html">Back to Web-Dev</a>
<div id="TOC">

<ul>
<li><a href="#non-resourceful-routes">Non-Resourceful Routes</a></li>
<li><a href="#naming-routes">Naming Routes</a></li>
<li><a href="#http-verb-constraints">HTTP Verb Constraints</a></li>
<li><a href="#segment-constraints">Segment Constraints</a></li>
</ul>
</div>
<h3 id="non-resourceful-routes">Non-Resourceful Routes</h3>
<p>Rails can route arbitrary URLs to actions.</p>
<h4 id="bound-parameters">Bound Parameters</h4>
<p>Regular routes are series of symbols that Rails maps to parts of an HTTP request.<br>
<code>:controller</code> and <code>:action</code> are special, they map to the names of an action within a controller. Example route:<br>
<code>get ‘:controller(/:action(/:id))’</code></p>
<p>a request <code>/photos/show/1</code> is processed by this route, invoking <code>show</code> action by <code>PhotosController</code>. 1 is passed through <code>params[:id]</code></p>
<h4 id="dynamic-segments">Dynamic Segments</h4>
<p>Anything other than <code>:controller</code> or <code>:action</code> is a part of params, as dynamic segments.<br>
<code>get ‘:controller/:action/:id/:user_id’</code></p>
<h4 id="static-segments">Static Segments</h4>
<p>Any segment in the path not prepended by a colon is static:<br>
<code>get ‘:controller/:action/:id/with_user/:user_id’</code><br>
responds to path <code>/photos/show/1/with_user/2</code></p>
<p><strong>Query String</strong> acts normally with non-resourceful routes. Query String passed as the final parameter in params. For the route:<br>
<code>get ‘:controller/:action/:id’</code><br>
the path <code>/photos/show/1?user_id=2</code> will pass <code>user_id=2</code> as params to <code>show</code> action in <code>PhotosController</code></p>
<h4 id="defining-defaults">Defining Defaults</h4>
<p>You don’t need to explicitly use <code>:controller</code> and <code>:action</code> symbols in a route. Supplying them by default:<br>
<code>get ‘photos/:id’, to: ‘photos#show’</code></p>
<p>a path <code>/photos/12</code> will implicitly match to the <code>show</code> action from <code>PhotosController</code></p>
<p>You can define other defaults in a route by supplying a hash to the :defaults option. Applies to non-dynamic segments too:<br>
<code>get ‘photos/:id’, to: ‘photos#show’, defaults: { format: ‘jpg’ }</code><br>
matches path <code>photos/12</code> to show action of PhotosController, and set params[:format] to ‘jpg’</p>
<h3 id="naming-routes">Naming Routes</h3>
<p><code>get ‘exit’, to: ‘sessions#destroy’, as: :logout</code><br>
creates <code>logout_path</code> and <code>logout_url</code> as named helpers.</p>
<p><code>logout_path</code> will return <code>/exit</code> path</p>
<h3 id="http-verb-constraints">HTTP Verb Constraints</h3>
<p><code>match 'photos', to: 'photos#show', via: [:get, :post]</code> constrains a rote to particular verbs. <code>via :all</code> will match all verbs.</p>
<h3 id="segment-constraints">Segment Constraints</h3>
<p><code>:constraints</code> option enforces format for a dynamic segment.</p>
<pre><code>get 'photos/:id', to: 'photos#show', constraints: { id: /[A-Z]\d{5}/ }</code></pre>
<p>Matches <code>/photos/A12345</code> but not <code>/photos/893</code>.</p>
    <div id="footer">
      Notes by <a href="https://github.com/kevintpeng">Kevin Peng</a>, Google intern.<br>
      Formerly Riot Games, Bloomberg, Apple &amp; Shopify.<br>
      Connect with me on <a href="https://www.linkedin.com/in/kevintpeng/">LinkedIn</a>.
    </div>
</body>
</html>
